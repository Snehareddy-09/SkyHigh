
@{
    var role = Context.Session.GetString("Role");
    var isLoggedIn = !string.IsNullOrEmpty(role);
    var profilePicPath = Context.Session.GetString("ProfilePicPath") ?? "/ProfilePic/avtar.jpg";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>SkyHigh Airlines</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet" />

    <style>
        body {
            font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif;
            background: #f6f9fb;
            color: #222;
        }

        .navbar-airline {
            background: linear-gradient(90deg, #334155, #64748B 100%);
            box-shadow: 0 2px 8px rgba(33,150,243,0.07);
            padding: 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.35rem;
            color: #fff !important;
            letter-spacing: 1px;
        }

        .nav-link {
            color: #fff !important;
            font-weight: 500;
            font-size: 1rem;
            margin-right: 18px;
            transition: color 0.18s;
        }

            .nav-link:hover, .navbar-brand:hover {
                color: #FFD700 !important;
            }

        #navProfilePic {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            object-fit: cover;
            border: 2.5px solid #fff;
            box-shadow: 0 2px 8px #1565C066;
        }

        .main-content {
            min-height: 75vh;
            margin-top: 36px;
        }

        .custom-footer {
            background: linear-gradient(90deg, #334155, #64748B 100%);
            color: #fff;
            text-align: center;
            padding: 38px 12px 22px 12px;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            margin-top: 60px;
            box-shadow: 0 -4px 18px rgba(33,150,243,.13);
        }

        .footer-container h4 {
            margin-bottom: 8px;
            font-weight: 700;
        }

        /*  Social Icons */
        .footer-icons a {
            color: #ffffff;
            margin: 0 12px;
            font-size: 22px;
            transition: color 0.3s ease, transform 0.3s ease;
            display: inline-block;
        }

            /*  Brand Hover Colors */
            .footer-icons a.youtube:hover i {
                color: #1DA1F2; /* YouTube Red */
            }

            .footer-icons a.twitter:hover i {
                color: #1DA1F2; /* Twitter (X) Blue */
            }

            .footer-icons a.instagram:hover i {
                color: #1DA1F2; /* Instagram Pinkish Red */
            }

            .footer-icons a.linkedin:hover i {
                color: #1DA1F2; /* LinkedIn Blue */
            }

            .footer-icons a:hover i {
                transform: scale(1.2);
                transition: transform 0.3s ease, color 0.3s ease;
            }

        /*  Feedback Button */
        .feedback-btn {
            display: inline-block;
            margin-top: 10px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            color: #fff;
            padding: 8px 18px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

            .feedback-btn i {
                margin-right: 6px;
                vertical-align: middle;
            }

            .feedback-btn:hover {
                background: linear-gradient(90deg, #00bcd4, #007bff);
                transform: scale(1.05);
                color: #fff;
                box-shadow: 0 0 12px rgba(0, 188, 212, 0.4);
            }

        /* 📧 Email link styling */
        .email-link {
            text-decoration: none;
            color: #fff;
            transition: color 0.3s ease;
        }

            .email-link:hover {
                color: #FFD700; /* Golden hover for email */
                text-decoration: underline;
            }

        .footer-copy {
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: .85;
        }

        @@media (max-width: 992px) {
            .navbar-nav {
                flex-direction: column;
            }

            .navbar-brand {
                font-size: 1.1rem;
            }

            .main-content {
                margin-top: 18px;
            }
        }

        /* === SkyHigh Airlines | Floating Buttons with Entry Animation === */

        /* Animation Keyframes */
        @@keyframes floatIn {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.9);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /*  Contact Us Floating Button */
        .help-float-btn {
            position: fixed;
            bottom: 90px;
            right: 18px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007bff, #00bcd4);
            color: #fff;
            border: none;
            outline: none;
            font-size: 1.3rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 999;
            transition: all 0.25s ease;
            opacity: 0;
            animation: floatIn 0.6s ease-out 0.3s forwards; /* delay for smooth sequence */
        }

            .help-float-btn:hover {
                transform: scale(1.1);
                background: linear-gradient(135deg, #00bcd4, #007bff);
            }
        /*  Chatbot Floating Button */
        #chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 18px;
            z-index: 1000;
            font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif;
        }

        #chatbot-toggle {
            background: linear-gradient(135deg, #007bff, #00bcd4);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
            transition: all 0.25s ease;
            opacity: 0;
            animation: floatIn 0.6s ease-out 0.6s forwards; /* appears after Contact Us */
        }

            #chatbot-toggle:hover {
                transform: scale(1.1);
                background: linear-gradient(135deg, #00bcd4, #007bff);
            }

        /*  Responsive Adjustments */
        @@media (max-width: 576px) {
            .help-float-btn, #chatbot-toggle {
                width: 42px;
                height: 42px;
                font-size: 1.1rem;
                right: 14px;
            }

            .help-float-btn {
                bottom: 80px;
            }

            #chatbot-container {
                bottom: 14px;
            }
        }



        /* Modal Styling */
        .modal-content {
            border-radius: 14px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        }

        .modal-header {
            background: linear-gradient(90deg, #334155, #64748B);
            color: #fff;
            border-top-left-radius: 14px;
            border-top-right-radius: 14px;
        }

        .modal-title {
            font-weight: 700;
            font-size: 1.3rem;
        }

        .popup-contact-form label {
            font-weight: 600;
            color: #334155;
        }

        .popup-contact-form .form-control {
            border-radius: 8px;
            border: 1.5px solid #cbd5e1;
            padding: 10px;
            transition: border-color 0.2s ease;
        }

            .popup-contact-form .form-control:focus {
                border-color: #007bff;
                box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
            }

        .popup-contact-form button {
            background: linear-gradient(90deg, #007bff, #00bcd4);
            border: none;
            font-weight: 600;
            padding: 12px 0;
            border-radius: 8px;
            font-size: 1rem;
            transition: background 0.3s ease;
        }

            .popup-contact-form button:hover {
                background: linear-gradient(90deg, #00bcd4, #007bff);
            }

        /* Responsive adjustment */
        @@media (max-width: 576px) {
            .help-float-btn {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>

    @RenderSection("Styles", required: false)

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-airline">
            <div class="container">
                @* <a class="navbar-brand" asp-controller="Home" asp-action="Index">✈️ SkyHigh Airlines</a> *@
                <a class="navbar-brand d-flex align-items-center" asp-controller="Home" asp-action="Index">
                    <img src="~/images/logo1.png" alt="SkyHigh Airlines Logo"
                         style="height: 65px; width: auto; margin-right: 10px; object-fit: contain; margin-top: -5px;" />
                </a>


                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        @if (role == "User")
                        {
                            <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Index">Home</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Flight" asp-action="Search">Search Flights</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Booking" asp-action="MyBookings">My Bookings</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Contact">Contact Us</a></li>

                        }
                        @if (Context.Session.GetString("Role") == "User")
                        {
                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="MyMessages">My Inquiries</a>
                            </li>
                        }

                        @if (!isLoggedIn)
                        {
                            <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Index">Home</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Flight" asp-action="Search">Search Flights</a></li>



                            <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Contact">Contact Us</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Account" asp-action="Login">Login</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Account" asp-action="Register">Register</a></li>


                        }
                        else
                        {
                            <li class="nav-item"><a class="nav-link" asp-controller="Account" asp-action="Logout">Logout</a></li>
                        }
                        @if (role == "Admin")
                        {
                            <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Index">Home</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Flight" asp-action="AddFlight">Add Flight</a></li>
                            <li class="nav-item"><a class="nav-link" asp-controller="Flight" asp-action="ViewFlights">Admin Flights</a></li>

                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Admin" asp-action="ViewMessages">View Messages</a>
                            </li>
                        }
                    </ul>
                    <a asp-controller="Account" asp-action="Profile" class="d-flex flex-column align-items-center ms-3" style="text-decoration: none;">
                        <img id="navProfilePic" src="@profilePicPath" alt="Profile" />
                        <span style="font-size:13px; color:#fff;">Profile</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content container-fluid">
        @RenderBody()
    </main>

    <!--  Footer Section -->
    <footer class="custom-footer">
        <div class="footer-container">
            <h4>SkyHigh Airlines</h4>
            <p>Your trusted partner for safe, comfortable, and memorable air travel experiences.</p>

            <div class="footer-icons">
                <a href="https://www.youtube.com/%40SkyHighAirline-f1r"
                   target="_blank" rel="noopener noreferrer" title="YouTube" class="youtube">
                    <i class="bi bi-youtube"></i>
                </a>
                <a href="https://x.com/SkyHighAirlinee?t=O-YqeXx6q0waXCnWmOukAg&s=08"
                   target="_blank" rel="noopener noreferrer" title="Twitter (X)" class="twitter">
                    <i class="bi bi-twitter-x"></i>
                </a>
                <a href="https://www.instagram.com/skyhigh_airlines?utm_source=qr&igsh=NWFrNDd4aXM5MjQ0"
                   target="_blank" rel="noopener noreferrer" title="Instagram" class="instagram">
                    <i class="bi bi-instagram"></i>
                </a>
                <a href="https://www.linkedin.com/in/skyhigh-airlines-b1b47038b"
                   target="_blank" rel="noopener noreferrer" title="LinkedIn" class="linkedin">
                    <i class="bi bi-linkedin"></i>
                </a>
            </div>

            <p class="footer-copy">
                Contact :
                <a href="mailto:skyhighairlinee@gmail.com?subject=Customer%20Feedback%20-%20SkyHigh%20Airlines&body=Hello%20SkyHigh%20Airlines%2C%0A%0AI%20would%20like%20to%20share%20my%20review%20or%20feedback%20about%20your%20service.%0A%0AThank%20you!%0A"
                   class="email-link" title="Send us your feedback">
                    skyhighairlinee@gmail.com
                </a>
            </p>

            <a href="mailto:skyhighairlinee@gmail.com?subject=Customer%20Feedback%20-%20SkyHigh%20Airlines&body=Hello%20SkyHigh%20Airlines%2C%0A%0AI%20would%20like%20to%20share%20my%20review%20or%20feedback%20about%20your%20service.%0A%0AThank%20you!%0A"
               class="feedback-btn" title="Send Feedback">
                <i class="bi bi-envelope-fill"></i> Send Feedback
            </a>

            <p class="footer-copy">© 2025 SkyHigh Airlines. All rights reserved</p>
        </div>
    </footer>
    <partial name="_Chatbot" />

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true,
            easing: 'ease-out'
        });
    </script>
    @* <!--  Floating Help Button -->
    <button type="button" class="help-float-btn" data-bs-toggle="modal" data-bs-target="#contactModal" title="Need Help?">
        <i class="bi bi-chat-dots-fill"></i>
    </button> *@

    <!-- 💬 Contact Us Modal -->
    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contactModalLabel">Contact SkyHigh Airlines</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <form asp-action="Contact" asp-controller="Home" method="post" autocomplete="off" class="popup-contact-form">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="Name" class="form-label">Full Name</label>
                                <input name="Name" class="form-control" placeholder="Enter your full name" required />
                            </div>
                            <div class="col-md-6">
                                <label for="Email" class="form-label">Email Address</label>
                                <input name="Email" type="email" class="form-control" placeholder="Enter your email" required />
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="Subject" class="form-label">Subject</label>
                            <input name="Subject" class="form-control" placeholder="Booking Inquiry, Feedback, etc." required />
                        </div>

                        <div class="mb-3">
                            <label for="Message" class="form-label">Message</label>
                            <textarea name="Message" class="form-control" rows="4" placeholder="Type your message..." required></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Global Loading Spinner -->
    <div id="loadingSpinner" class="d-none position-fixed top-50 start-50 translate-middle text-center" style="z-index: 2000;">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-white bg-dark px-3 py-1 rounded shadow">Processing...</p>
    </div>

    <!--  Bootstrap Bundle (make sure it's loaded before your script) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!--  Global Loading Spinner Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
          // Select all forms
          document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function () {
              const spinner = document.getElementById('loadingSpinner');
              if (spinner) {
                spinner.classList.remove('d-none');
              }
            });
          });
        });
    </script>


</body>
</html>


